{
  "ServiceName": "erp_virtualfinance_backend",

  "SourceConfiguration": {
    "AuthenticationConfiguration": {
      "ConnectionArn": "arn:aws:apprunner:ap-south-1:771415040052:connection/Erp_virtualfinance/0dbb4119f17b4eff8f3cca4b72d81f1f"
    },
    "CodeRepository": {
      "RepositoryUrl": "https://github.com/virtualfinance1992/Virtual-Finance",
      "SourceCodeVersion": {
        "Type": "BRANCH",
        "Value": "main"
      },
      "SourceDirectory": "/",
      "CodeConfiguration": {
        "ConfigurationSource": "API",
        "CodeConfigurationValues": {
          "Runtime": "PYTHON_311",
          "BuildCommand": "echo \"=== Step 1: Change directory to backend ===\" && cd backend && echo \"=== Step 2: Install Python dependencies ===\" && python3 -m pip install -r requirements.txt && echo \"=== Step 3: Collect static files ===\" && python3 manage.py collectstatic --no-input && echo \"=== Build complete ===\"",
          "StartCommand": "python3 -m gunicorn virtual_finance.wsgi:application --bind 0.0.0.0:8000",
          "Port": "8000"
        }
      }
    },
    "Environment": [
      { "Name": "DJANGO_SECRET_KEY",    "Value": "<YOUR‐SECRET‐KEY>"    },
      { "Name": "DJANGO_DEBUG",         "Value": "False"                },
      { "Name": "DJANGO_ALLOWED_HOSTS", "Value": "*"                    },
      { "Name": "DB_NAME",              "Value": "Virtual-Finance"      },
      { "Name": "DB_USER",              "Value": "postgres"             },
      { "Name": "DB_PASSWORD",          "Value": "<YOUR‐DB‐PASSWORD>"    },
      { "Name": "DB_HOST",              "Value": "<YOUR‐RDS‐ENDPOINT>"   },
      { "Name": "DB_PORT",              "Value": "5432"                 }
    ],
    "AutoDeploymentsEnabled": false
  },

  "InstanceConfiguration": {
    "Cpu": "1024",
    "Memory": "2048",
    "InstanceRoleArn": "arn:aws:iam::771415040052:role/AppRunnerCustomInstanceRole"
  },

  "HealthCheckConfiguration": {
    "Protocol": "HTTP",
    "Path": "/health/",
    "Interval": 10,
    "Timeout": 5,
    "HealthyThreshold": 1,
    "UnhealthyThreshold": 5
  },

  "NetworkConfiguration": {
    "EgressConfiguration": {
      "EgressType": "VPC",
      "VpcConnectorArn": "arn:aws:apprunner:ap-south-1:771415040052:vpcconnector/erp-vpc-connector/1/0f0250053027421b80571023ffa019a4"
    },
    "IngressConfiguration": {
      "IsPubliclyAccessible": true
    }
  },

  "ObservabilityConfiguration": {
    "ObservabilityEnabled": true,
    "ObservabilityConfigurationArn": "arn:aws:apprunner:ap-south-1:771415040052:observabilityconfiguration/DefaultConfiguration/1/00000000000000000000000000000001"
  },

  "Tags": [
    {
      "Key": "Environment",
      "Value": "Production"
    }
  ]
}
